<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>ê°•ë‚¨êµ¬/ì„œì´ˆêµ¬ ìµœê·¼ 1ê°œì›” ë¬¸ì˜ ë°ì´í„° ë¶„ì„</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ëª¨ë°”ì¼ ìµœì í™” */
        * {
            -webkit-tap-highlight-color: transparent;
        }
        
        html {
            font-size: 16px;
        }
        
        @media (max-width: 640px) {
            html {
                font-size: 14px;
            }
        }
        
        body {
            -webkit-text-size-adjust: 100%;
            text-size-adjust: 100%;
        }
        
        /* ì œëª©ì´ ì ˆëŒ€ ì¤„ë°”ê¿ˆ ì•ˆ ë˜ë„ë¡ */
        .no-wrap-title {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        /* KPI ì¹´ë“œ ë†’ì´ í†µì¼ */
        .kpi-card {
            min-height: 140px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        @media (max-width: 640px) {
            .kpi-card {
                min-height: 120px;
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100">
    <div class="min-h-screen p-3 sm:p-6 md:p-8">
        <div class="max-w-6xl mx-auto">
            <!-- í—¤ë” -->
            <div class="bg-gradient-to-r from-red-400 to-orange-500 rounded-t-3xl p-4 sm:p-6 md:p-8 text-white shadow-lg">
                <div class="flex items-center justify-center gap-2 mb-2">
                    <span class="text-xl sm:text-2xl md:text-3xl flex-shrink-0">ğŸ“Š</span>
                    <h1 class="text-sm sm:text-lg md:text-2xl lg:text-3xl font-bold text-center leading-tight">
                        ê°•ë‚¨êµ¬/ì„œì´ˆêµ¬ ìµœê·¼ 1ê°œì›” ë¬¸ì˜ ë°ì´í„° ë¶„ì„
                    </h1>
                </div>
                <p class="text-center text-white/90 text-xs sm:text-sm">2024ë…„ 10ì›” 1ì¼ ~ 11ì›” 19ì¼ ê³ ê° ë¬¸ì˜ ë§¤ë¬¼ ì¸ì‚¬ì´íŠ¸</p>
            </div>

            <!-- êµ¬ ì„ íƒ íƒ­ -->
            <div class="bg-white shadow-lg -mt-4 mx-2 sm:mx-4 rounded-2xl p-2 flex gap-2">
                <button onclick="switchGu('ê°•ë‚¨êµ¬')" id="btn-ê°•ë‚¨êµ¬" 
                    class="flex-1 py-2.5 sm:py-3 rounded-xl font-bold transition-all bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-md text-sm sm:text-base whitespace-nowrap">
                    ğŸ™ï¸ ê°•ë‚¨êµ¬
                </button>
                <button onclick="switchGu('ì„œì´ˆêµ¬')" id="btn-ì„œì´ˆêµ¬"
                    class="flex-1 py-2.5 sm:py-3 rounded-xl font-bold transition-all bg-gray-100 text-gray-600 hover:bg-gray-200 text-sm sm:text-base whitespace-nowrap">
                    ğŸŒ³ ì„œì´ˆêµ¬
                </button>
            </div>

            <!-- ë§¤ë¬¼ íƒ€ì… ì„ íƒ -->
            <div class="bg-white shadow-md mt-3 sm:mt-4 mx-2 sm:mx-4 rounded-2xl p-2 flex gap-2">
                <button onclick="switchType('ì „ì²´')" id="btn-ì „ì²´" 
                    class="flex-1 py-2 rounded-lg font-semibold transition-all bg-indigo-500 text-white shadow-sm text-xs sm:text-sm whitespace-nowrap">
                    ğŸ“‹ ì „ì²´
                </button>
                <button onclick="switchType('ìƒê°€')" id="btn-ìƒê°€"
                    class="flex-1 py-2 rounded-lg font-semibold transition-all bg-gray-100 text-gray-600 hover:bg-gray-200 text-xs sm:text-sm whitespace-nowrap">
                    ğŸª ìƒê°€
                </button>
                <button onclick="switchType('ì‚¬ë¬´ì‹¤')" id="btn-ì‚¬ë¬´ì‹¤"
                    class="flex-1 py-2 rounded-lg font-semibold transition-all bg-gray-100 text-gray-600 hover:bg-gray-200 text-xs sm:text-sm whitespace-nowrap">
                    ğŸ¢ ì‚¬ë¬´ì‹¤
                </button>
            </div>

            <!-- KPI ì¹´ë“œ -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 mt-5 sm:mt-8 mb-5 sm:mb-8 px-2 sm:px-4">
                <div class="kpi-card bg-gradient-to-br from-orange-400 to-orange-500 rounded-2xl p-3 sm:p-5 text-white shadow-xl transform hover:scale-105 transition-transform">
                    <div class="text-2xl sm:text-3xl mb-1">ğŸ”¥</div>
                    <div class="text-xs sm:text-sm opacity-90 mb-1 whitespace-nowrap">í•«í”Œë ˆì´ìŠ¤ 1ìœ„</div>
                    <div class="text-base sm:text-xl md:text-2xl font-bold truncate" id="kpi-hotplace">-</div>
                </div>
                <div class="kpi-card bg-gradient-to-br from-blue-400 to-blue-500 rounded-2xl p-3 sm:p-5 text-white shadow-xl transform hover:scale-105 transition-transform">
                    <div class="text-2xl sm:text-3xl mb-1">ğŸ’°</div>
                    <div class="text-xs sm:text-sm opacity-90 mb-1 whitespace-nowrap">í‰ê·  ë³´ì¦ê¸ˆ</div>
                    <div class="text-base sm:text-xl md:text-2xl font-bold" id="kpi-deposit">-</div>
                </div>
                <div class="kpi-card bg-gradient-to-br from-indigo-400 to-indigo-500 rounded-2xl p-3 sm:p-5 text-white shadow-xl transform hover:scale-105 transition-transform">
                    <div class="text-2xl sm:text-3xl mb-1">ğŸ </div>
                    <div class="text-xs sm:text-sm opacity-90 mb-1 whitespace-nowrap">í‰ê·  ì›”ì„¸</div>
                    <div class="text-base sm:text-xl md:text-2xl font-bold" id="kpi-monthly">-</div>
                </div>
                <div class="kpi-card bg-gradient-to-br from-purple-400 to-purple-500 rounded-2xl p-3 sm:p-5 text-white shadow-xl transform hover:scale-105 transition-transform">
                    <div class="text-2xl sm:text-3xl mb-1">ğŸ“</div>
                    <div class="text-xs sm:text-sm opacity-90 mb-1 whitespace-nowrap">í‰ê·  ë©´ì </div>
                    <div class="text-base sm:text-xl md:text-2xl font-bold" id="kpi-area">-</div>
                </div>
            </div>

            <!-- ë©”ì¸ ì»¨í…ì¸  -->
            <div class="bg-white rounded-3xl shadow-2xl p-4 sm:p-6 md:p-8 space-y-6 sm:space-y-10">
                
                <!-- í•«í”Œë ˆì´ìŠ¤ TOP 5 -->
                <div>
                    <h2 class="text-base sm:text-xl md:text-2xl font-bold text-gray-800 mb-4 sm:mb-6 flex items-center gap-2">
                        <span class="flex-shrink-0">ğŸ—ºï¸</span> 
                        <span class="flex-shrink-0" id="title-gu">ê°•ë‚¨êµ¬</span> 
                        <span class="flex-shrink-0" id="title-type">ì „ì²´</span> 
                        <span class="whitespace-nowrap">í•«í”Œë ˆì´ìŠ¤ TOP 5</span>
                    </h2>
                    <div class="flex flex-col md:flex-row items-center gap-4 sm:gap-6">
                        <div class="w-full md:w-1/2">
                            <canvas id="chart-hotplace"></canvas>
                        </div>
                        <div class="w-full md:w-1/2" id="hotplace-list">
                            <!-- ë™ì  ìƒì„± -->
                        </div>
                    </div>
                </div>

                <!-- ë³´ì¦ê¸ˆ êµ¬ê°„ë³„ -->
                <div>
                    <h2 class="text-base sm:text-xl md:text-2xl font-bold text-gray-800 mb-4 sm:mb-6 flex items-center gap-2">
                        <span>ğŸ’°</span> <span class="whitespace-nowrap">ë³´ì¦ê¸ˆ êµ¬ê°„ë³„ ë¶„ì„</span>
                    </h2>
                    <div class="h-64 sm:h-80">
                        <canvas id="chart-deposit"></canvas>
                    </div>
                </div>

                <!-- ì›”ì„¸ êµ¬ê°„ë³„ -->
                <div>
                    <h2 class="text-base sm:text-xl md:text-2xl font-bold text-gray-800 mb-4 sm:mb-6 flex items-center gap-2">
                        <span>ğŸ“Š</span> <span class="whitespace-nowrap">ì›”ì„¸ êµ¬ê°„ë³„ ë¶„ì„</span>
                    </h2>
                    <div class="h-64 sm:h-80">
                        <canvas id="chart-monthly"></canvas>
                    </div>
                </div>

                <!-- ê¶Œë¦¬ê¸ˆ êµ¬ê°„ë³„ -->
                <div>
                    <h2 class="text-base sm:text-xl md:text-2xl font-bold text-gray-800 mb-4 sm:mb-6 flex items-center gap-2">
                        <span>ğŸ’</span> <span class="whitespace-nowrap">ê¶Œë¦¬ê¸ˆ êµ¬ê°„ë³„ ë¶„ì„</span>
                    </h2>
                    <div class="h-64 sm:h-80">
                        <canvas id="chart-premium"></canvas>
                    </div>
                </div>

                <!-- í‰ìˆ˜ëŒ€ë³„ -->
                <div>
                    <h2 class="text-base sm:text-xl md:text-2xl font-bold text-gray-800 mb-4 sm:mb-6 flex items-center gap-2">
                        <span>ğŸ“</span> <span class="whitespace-nowrap">í‰ìˆ˜ëŒ€ë³„ ì„ í˜¸ë„</span>
                    </h2>
                    <div class="flex justify-center">
                        <div class="w-full max-w-md h-64 sm:h-80">
                            <canvas id="chart-area"></canvas>
                        </div>
                    </div>
                </div>

                <!-- ì¸ì‚¬ì´íŠ¸ ë° ë§¤ë¬¼ ë“±ë¡ ì „ëµ -->
                <div class="mt-6 sm:mt-10">
                    <h2 class="text-base sm:text-xl md:text-2xl font-bold text-gray-800 mb-4 sm:mb-6 flex items-center gap-2">
                        <span>ğŸ’¡</span> <span class="whitespace-nowrap">ì¸ì‚¬ì´íŠ¸ ë° ë§¤ë¬¼ ë“±ë¡ ì „ëµ</span>
                    </h2>
                    <div class="space-y-4" id="insights-content">
                        <!-- ë™ì  ìƒì„± -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ğŸ”’ ë³´ì•ˆ: ë¯¸ë¦¬ ê³„ì‚°ëœ í†µê³„ ë°ì´í„°ë§Œ ì €ì¥
        const PRECOMPUTED_DATA = {
            "ê°•ë‚¨êµ¬": {
                "ì „ì²´": {"kpi":{"hotPlace":"ì—­ì‚¼ë™","avgDeposit":"0.30","avgMonthly":227,"avgArea":92},"topDongs":[{"name":"ì—­ì‚¼ë™","percentage":23.7},{"name":"ë…¼í˜„ë™","percentage":20.0},{"name":"ì‹ ì‚¬ë™","percentage":14.8},{"name":"ì‚¼ì„±ë™","percentage":10.3},{"name":"ì²­ë‹´ë™","percentage":7.4}],"depositRanges":[{"range":"0-1,000ë§Œì›","count":89,"percentage":13.5},{"range":"1,000-3,000ë§Œì›","count":278,"percentage":42.3},{"range":"3,000-5,000ë§Œì›","count":160,"percentage":24.3},{"range":"5,000-1ì–µì›","count":103,"percentage":15.7},{"range":"1ì–µì› ì´ìƒ","count":27,"percentage":4.1}],"monthlyRanges":[{"range":"0-100ë§Œì›","count":63,"percentage":9.6},{"range":"100-200ë§Œì›","count":268,"percentage":40.8},{"range":"200-300ë§Œì›","count":160,"percentage":24.3},{"range":"300-500ë§Œì›","count":103,"percentage":15.7},{"range":"500ë§Œì› ì´ìƒ","count":63,"percentage":9.6}],"premiumRanges":[{"range":"ê¶Œë¦¬ê¸ˆ ì—†ìŒ","count":0,"percentage":0.0},{"range":"0-3,000ë§Œì›","count":626,"percentage":95.3},{"range":"3,000-5,000ë§Œì›","count":14,"percentage":2.1},{"range":"5,000-1ì–µì›","count":13,"percentage":2.0},{"range":"1ì–µì› ì´ìƒ","count":4,"percentage":0.6}],"areaRanges":[{"name":"10í‰ ë¯¸ë§Œ","count":82,"percentage":12.5},{"name":"10-20í‰","count":249,"percentage":37.9},{"name":"20-30í‰","count":110,"percentage":16.7},{"name":"30-50í‰","count":144,"percentage":21.9},{"name":"50í‰ ì´ìƒ","count":72,"percentage":11.0}]},
                "ìƒê°€": {"kpi":{"hotPlace":"ì—­ì‚¼ë™","avgDeposit":"0.30","avgMonthly":233,"avgArea":91},"topDongs":[{"name":"ì—­ì‚¼ë™","percentage":24.1},{"name":"ë…¼í˜„ë™","percentage":21.3},{"name":"ì‹ ì‚¬ë™","percentage":15.2},{"name":"ì‚¼ì„±ë™","percentage":9.8},{"name":"ì²­ë‹´ë™","percentage":7.7}],"depositRanges":[{"range":"0-1,000ë§Œì›","count":54,"percentage":13.0},{"range":"1,000-3,000ë§Œì›","count":175,"percentage":42.2},{"range":"3,000-5,000ë§Œì›","count":103,"percentage":24.8},{"range":"5,000-1ì–µì›","count":62,"percentage":14.9},{"range":"1ì–µì› ì´ìƒ","count":21,"percentage":5.1}],"monthlyRanges":[{"range":"0-100ë§Œì›","count":38,"percentage":9.2},{"range":"100-200ë§Œì›","count":169,"percentage":40.8},{"range":"200-300ë§Œì›","count":104,"percentage":25.1},{"range":"300-500ë§Œì›","count":66,"percentage":15.9},{"range":"500ë§Œì› ì´ìƒ","count":37,"percentage":8.9}],"premiumRanges":[{"range":"ê¶Œë¦¬ê¸ˆ ì—†ìŒ","count":0,"percentage":0.0},{"range":"0-3,000ë§Œì›","count":394,"percentage":95.0},{"range":"3,000-5,000ë§Œì›","count":9,"percentage":2.2},{"range":"5,000-1ì–µì›","count":8,"percentage":1.9},{"range":"1ì–µì› ì´ìƒ","count":4,"percentage":1.0}],"areaRanges":[{"name":"10í‰ ë¯¸ë§Œ","count":58,"percentage":14.0},{"name":"10-20í‰","count":159,"percentage":38.4},{"name":"20-30í‰","count":73,"percentage":17.6},{"name":"30-50í‰","count":85,"percentage":20.5},{"name":"50í‰ ì´ìƒ","count":39,"percentage":9.4}]},
                "ì‚¬ë¬´ì‹¤": {"kpi":{"hotPlace":"ì—­ì‚¼ë™","avgDeposit":"0.29","avgMonthly":219,"avgArea":94},"topDongs":[{"name":"ì—­ì‚¼ë™","percentage":23.2},{"name":"ë…¼í˜„ë™","percentage":18.2},{"name":"ì‹ ì‚¬ë™","percentage":14.2},{"name":"ì‚¼ì„±ë™","percentage":11.0},{"name":"ì²­ë‹´ë™","percentage":7.0}],"depositRanges":[{"range":"0-1,000ë§Œì›","count":35,"percentage":14.2},{"range":"1,000-3,000ë§Œì›","count":103,"percentage":42.4},{"range":"3,000-5,000ë§Œì›","count":57,"percentage":23.5},{"range":"5,000-1ì–µì›","count":41,"percentage":16.9},{"range":"1ì–µì› ì´ìƒ","count":6,"percentage":2.5}],"monthlyRanges":[{"range":"0-100ë§Œì›","count":25,"percentage":10.3},{"range":"100-200ë§Œì›","count":99,"percentage":40.7},{"range":"200-300ë§Œì›","count":56,"percentage":23.0},{"range":"300-500ë§Œì›","count":37,"percentage":15.2},{"range":"500ë§Œì› ì´ìƒ","count":26,"percentage":10.7}],"premiumRanges":[{"range":"ê¶Œë¦¬ê¸ˆ ì—†ìŒ","count":0,"percentage":0.0},{"range":"0-3,000ë§Œì›","count":232,"percentage":95.5},{"range":"3,000-5,000ë§Œì›","count":5,"percentage":2.1},{"range":"5,000-1ì–µì›","count":5,"percentage":2.1},{"range":"1ì–µì› ì´ìƒ","count":1,"percentage":0.4}],"areaRanges":[{"name":"10í‰ ë¯¸ë§Œ","count":24,"percentage":9.9},{"name":"10-20í‰","count":90,"percentage":37.0},{"name":"20-30í‰","count":37,"percentage":15.2},{"name":"30-50í‰","count":59,"percentage":24.3},{"name":"50í‰ ì´ìƒ","count":33,"percentage":13.6}]}
            },
            "ì„œì´ˆêµ¬": {
                "ì „ì²´": {"kpi":{"hotPlace":"ì„œì´ˆë™","avgDeposit":"0.25","avgMonthly":189,"avgArea":98},"topDongs":[{"name":"ì„œì´ˆë™","percentage":33.3},{"name":"ì–‘ì¬ë™","percentage":30.4},{"name":"ë°˜í¬ë™","percentage":13.0},{"name":"ë°©ë°°ë™","percentage":10.5},{"name":"ì ì›ë™","percentage":7.2}],"depositRanges":[{"range":"0-1,000ë§Œì›","count":40,"percentage":14.5},{"range":"1,000-3,000ë§Œì›","count":142,"percentage":51.4},{"range":"3,000-5,000ë§Œì›","count":40,"percentage":14.5},{"range":"5,000-1ì–µì›","count":43,"percentage":15.6},{"range":"1ì–µì› ì´ìƒ","count":11,"percentage":4.0}],"monthlyRanges":[{"range":"0-100ë§Œì›","count":49,"percentage":17.8},{"range":"100-200ë§Œì›","count":129,"percentage":46.7},{"range":"200-300ë§Œì›","count":51,"percentage":18.5},{"range":"300-500ë§Œì›","count":32,"percentage":11.6},{"range":"500ë§Œì› ì´ìƒ","count":15,"percentage":5.4}],"premiumRanges":[{"range":"ê¶Œë¦¬ê¸ˆ ì—†ìŒ","count":0,"percentage":0.0},{"range":"0-3,000ë§Œì›","count":263,"percentage":95.3},{"range":"3,000-5,000ë§Œì›","count":5,"percentage":1.8},{"range":"5,000-1ì–µì›","count":7,"percentage":2.5},{"range":"1ì–µì› ì´ìƒ","count":1,"percentage":0.4}],"areaRanges":[{"name":"10í‰ ë¯¸ë§Œ","count":54,"percentage":19.6},{"name":"10-20í‰","count":93,"percentage":33.7},{"name":"20-30í‰","count":43,"percentage":15.6},{"name":"30-50í‰","count":56,"percentage":20.3},{"name":"50í‰ ì´ìƒ","count":30,"percentage":10.9}]},
                "ìƒê°€": {"kpi":{"hotPlace":"ì„œì´ˆë™","avgDeposit":"0.25","avgMonthly":197,"avgArea":92},"topDongs":[{"name":"ì„œì´ˆë™","percentage":33.1},{"name":"ì–‘ì¬ë™","percentage":28.5},{"name":"ë°˜í¬ë™","percentage":13.8},{"name":"ë°©ë°°ë™","percentage":12.3},{"name":"ì ì›ë™","percentage":6.2}],"depositRanges":[{"range":"0-1,000ë§Œì›","count":20,"percentage":15.4},{"range":"1,000-3,000ë§Œì›","count":69,"percentage":53.1},{"range":"3,000-5,000ë§Œì›","count":17,"percentage":13.1},{"range":"5,000-1ì–µì›","count":18,"percentage":13.8},{"range":"1ì–µì› ì´ìƒ","count":6,"percentage":4.6}],"monthlyRanges":[{"range":"0-100ë§Œì›","count":22,"percentage":16.9},{"range":"100-200ë§Œì›","count":62,"percentage":47.7},{"range":"200-300ë§Œì›","count":23,"percentage":17.7},{"range":"300-500ë§Œì›","count":14,"percentage":10.8},{"range":"500ë§Œì› ì´ìƒ","count":9,"percentage":6.9}],"premiumRanges":[{"range":"ê¶Œë¦¬ê¸ˆ ì—†ìŒ","count":0,"percentage":0.0},{"range":"0-3,000ë§Œì›","count":123,"percentage":94.6},{"range":"3,000-5,000ë§Œì›","count":3,"percentage":2.3},{"range":"5,000-1ì–µì›","count":3,"percentage":2.3},{"range":"1ì–µì› ì´ìƒ","count":1,"percentage":0.8}],"areaRanges":[{"name":"10í‰ ë¯¸ë§Œ","count":30,"percentage":23.1},{"name":"10-20í‰","count":46,"percentage":35.4},{"name":"20-30í‰","count":19,"percentage":14.6},{"name":"30-50í‰","count":23,"percentage":17.7},{"name":"50í‰ ì´ìƒ","count":12,"percentage":9.2}]},
                "ì‚¬ë¬´ì‹¤": {"kpi":{"hotPlace":"ì„œì´ˆë™","avgDeposit":"0.25","avgMonthly":181,"avgArea":105},"topDongs":[{"name":"ì„œì´ˆë™","percentage":33.6},{"name":"ì–‘ì¬ë™","percentage":32.4},{"name":"ë°˜í¬ë™","percentage":12.0},{"name":"ë°©ë°°ë™","percentage":8.4},{"name":"ì ì›ë™","percentage":8.4}],"depositRanges":[{"range":"0-1,000ë§Œì›","count":20,"percentage":13.5},{"range":"1,000-3,000ë§Œì›","count":73,"percentage":49.7},{"range":"3,000-5,000ë§Œì›","count":23,"percentage":15.6},{"range":"5,000-1ì–µì›","count":25,"percentage":17.0},{"range":"1ì–µì› ì´ìƒ","count":6,"percentage":4.1}],"monthlyRanges":[{"range":"0-100ë§Œì›","count":27,"percentage":18.4},{"range":"100-200ë§Œì›","count":67,"percentage":45.6},{"range":"200-300ë§Œì›","count":28,"percentage":19.0},{"range":"300-500ë§Œì›","count":18,"percentage":12.2},{"range":"500ë§Œì› ì´ìƒ","count":7,"percentage":4.8}],"premiumRanges":[{"range":"ê¶Œë¦¬ê¸ˆ ì—†ìŒ","count":0,"percentage":0.0},{"range":"0-3,000ë§Œì›","count":140,"percentage":95.9},{"range":"3,000-5,000ë§Œì›","count":2,"percentage":1.4},{"range":"5,000-1ì–µì›","count":4,"percentage":2.7},{"range":"1ì–µì› ì´ìƒ","count":0,"percentage":0.0}],"areaRanges":[{"name":"10í‰ ë¯¸ë§Œ","count":24,"percentage":16.3},{"name":"10-20í‰","count":47,"percentage":32.0},{"name":"20-30í‰","count":24,"percentage":16.3},{"name":"30-50í‰","count":33,"percentage":22.4},{"name":"50í‰ ì´ìƒ","count":19,"percentage":12.9}]}
            }
        };

        let currentGu = 'ê°•ë‚¨êµ¬';
        let currentType = 'ì „ì²´';
        let charts = {};

        function loadData() {
            if (typeof ChartDataLabels !== 'undefined') {
                Chart.register(ChartDataLabels);
            }
            renderData(currentGu, currentType);
        }

        function switchGu(gu) {
            currentGu = gu;
            document.getElementById('btn-ê°•ë‚¨êµ¬').className = gu === 'ê°•ë‚¨êµ¬' 
                ? 'flex-1 py-2.5 sm:py-3 rounded-xl font-bold transition-all bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-md text-sm sm:text-base whitespace-nowrap'
                : 'flex-1 py-2.5 sm:py-3 rounded-xl font-bold transition-all bg-gray-100 text-gray-600 hover:bg-gray-200 text-sm sm:text-base whitespace-nowrap';
            document.getElementById('btn-ì„œì´ˆêµ¬').className = gu === 'ì„œì´ˆêµ¬'
                ? 'flex-1 py-2.5 sm:py-3 rounded-xl font-bold transition-all bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-md text-sm sm:text-base whitespace-nowrap'
                : 'flex-1 py-2.5 sm:py-3 rounded-xl font-bold transition-all bg-gray-100 text-gray-600 hover:bg-gray-200 text-sm sm:text-base whitespace-nowrap';
            renderData(gu, currentType);
        }

        function switchType(type) {
            currentType = type;
            ['ì „ì²´', 'ìƒê°€', 'ì‚¬ë¬´ì‹¤'].forEach(t => {
                document.getElementById(`btn-${t}`).className = t === type
                    ? 'flex-1 py-2 rounded-lg font-semibold transition-all bg-indigo-500 text-white shadow-sm text-xs sm:text-sm whitespace-nowrap'
                    : 'flex-1 py-2 rounded-lg font-semibold transition-all bg-gray-100 text-gray-600 hover:bg-gray-200 text-xs sm:text-sm whitespace-nowrap';
            });
            renderData(currentGu, type);
        }

        function renderData(gu, type) {
            const data = PRECOMPUTED_DATA[gu][type];
            if (!data) {
                alert(`${gu} ${type} ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.`);
                return;
            }

            // KPI ì—…ë°ì´íŠ¸
            document.getElementById('kpi-hotplace').textContent = data.kpi.hotPlace;
            document.getElementById('kpi-deposit').textContent = data.kpi.avgDeposit + 'ì–µì›';
            document.getElementById('kpi-monthly').textContent = data.kpi.avgMonthly + 'ë§Œì›';
            document.getElementById('kpi-area').textContent = data.kpi.avgArea + 'ã¡';
            document.getElementById('title-gu').textContent = gu;
            document.getElementById('title-type').textContent = type;

            // í•«í”Œë ˆì´ìŠ¤ ë¦¬ìŠ¤íŠ¸
            const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A', '#96CEB4'];
            document.getElementById('hotplace-list').innerHTML = data.topDongs.map((item, idx) => `
                <div class="flex items-center justify-between p-2.5 sm:p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors mb-2">
                    <div class="flex items-center gap-2 sm:gap-3">
                        <div class="w-7 h-7 sm:w-8 sm:h-8 rounded-full flex items-center justify-center text-white font-bold text-sm flex-shrink-0" 
                             style="background-color: ${colors[idx]}">
                            ${idx + 1}
                        </div>
                        <span class="font-semibold text-sm sm:text-base">${item.name}</span>
                    </div>
                    <span class="text-lg sm:text-xl font-bold text-gray-700 flex-shrink-0">${item.percentage}%</span>
                </div>
            `).join('');

            renderCharts(data, colors);
            generateInsights(data, gu, type);
        }

        function renderCharts(data, colors) {
            Object.values(charts).forEach(chart => chart?.destroy());

            // í•«í”Œë ˆì´ìŠ¤ ë„ë„› ì°¨íŠ¸
            const hotplaceCanvas = document.getElementById('chart-hotplace');
            let hotplaceHovering = false;
            
            charts.hotplace = new Chart(hotplaceCanvas, {
                type: 'doughnut',
                data: {
                    labels: data.topDongs.map(d => d.name),
                    datasets: [{
                        data: data.topDongs.map(d => d.percentage),
                        backgroundColor: colors
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: { 
                            position: 'bottom',
                            labels: { 
                                font: { size: 11 },
                                padding: 10
                            }
                        },
                        tooltip: {
                            enabled: true,
                            displayColors: false,
                            padding: 12,
                            titleFont: { size: 14 },
                            bodyFont: { size: 14 },
                            callbacks: {
                                title: () => '',
                                label: (context) => `${context.label}: ${context.parsed}%`
                            }
                        },
                        datalabels: {
                            color: '#fff',
                            font: {
                                weight: 'bold',
                                size: 11
                            },
                            formatter: (value, context) => {
                                if (hotplaceHovering) return '';
                                const label = context.chart.data.labels[context.dataIndex];
                                return label + '\n' + value + '%';
                            }
                        }
                    }
                }
            });
            
            hotplaceCanvas.addEventListener('mouseenter', () => {
                hotplaceHovering = true;
                charts.hotplace.update('none');
            });
            hotplaceCanvas.addEventListener('mouseleave', () => {
                hotplaceHovering = false;
                charts.hotplace.update('none');
            });

            // ë³´ì¦ê¸ˆ ë°” ì°¨íŠ¸
            const depositCanvas = document.getElementById('chart-deposit');
            let depositHovering = false;
            
            charts.deposit = new Chart(depositCanvas, {
                type: 'bar',
                data: {
                    labels: data.depositRanges.map(d => d.range),
                    datasets: [{
                        label: 'ë¹„ìœ¨',
                        data: data.depositRanges.map(d => d.percentage),
                        backgroundColor: '#60A5FA'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            enabled: true,
                            displayColors: false,
                            padding: 10,
                            titleFont: { size: 13 },
                            bodyFont: { size: 13 },
                            callbacks: {
                                title: () => '',
                                label: (context) => `${context.label}: ${context.parsed.y.toFixed(1)}%`
                            }
                        },
                        datalabels: {
                            color: '#fff',
                            font: {
                                weight: 'bold',
                                size: 11
                            },
                            formatter: (value) => {
                                if (depositHovering) return '';
                                return value.toFixed(1) + '%';
                            }
                        }
                    },
                    scales: {
                        y: { 
                            beginAtZero: true, 
                            title: { 
                                display: true, 
                                text: 'ë¹„ìœ¨ (%)',
                                font: { size: 11 }
                            },
                            ticks: { font: { size: 10 } }
                        },
                        x: { 
                            ticks: { 
                                font: { size: 9 },
                                maxRotation: 45,
                                minRotation: 45
                            }
                        }
                    }
                }
            });
            
            depositCanvas.addEventListener('mouseenter', () => {
                depositHovering = true;
                charts.deposit.update('none');
            });
            depositCanvas.addEventListener('mouseleave', () => {
                depositHovering = false;
                charts.deposit.update('none');
            });

            // ì›”ì„¸ ë¼ì¸ ì°¨íŠ¸
            const monthlyCanvas = document.getElementById('chart-monthly');
            let monthlyHovering = false;
            
            charts.monthly = new Chart(monthlyCanvas, {
                type: 'line',
                data: {
                    labels: data.monthlyRanges.map(d => d.range),
                    datasets: [{
                        label: 'ë¹„ìœ¨',
                        data: data.monthlyRanges.map(d => d.percentage),
                        borderColor: '#10B981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            enabled: true,
                            displayColors: false,
                            padding: 10,
                            titleFont: { size: 13 },
                            bodyFont: { size: 13 },
                            callbacks: {
                                title: () => '',
                                label: (context) => `${context.label}: ${context.parsed.y.toFixed(1)}%`
                            }
                        },
                        datalabels: {
                            color: '#059669',
                            font: {
                                weight: 'bold',
                                size: 11
                            },
                            formatter: (value) => {
                                if (monthlyHovering) return '';
                                return value.toFixed(1) + '%';
                            },
                            anchor: 'end',
                            align: 'top'
                        }
                    },
                    scales: {
                        y: { 
                            beginAtZero: true, 
                            max: 50,
                            title: { 
                                display: true, 
                                text: 'ë¹„ìœ¨ (%)',
                                font: { size: 11 }
                            },
                            ticks: { font: { size: 10 } }
                        },
                        x: { 
                            ticks: { 
                                font: { size: 9 },
                                maxRotation: 45,
                                minRotation: 45
                            }
                        }
                    }
                }
            });
            
            monthlyCanvas.addEventListener('mouseenter', () => {
                monthlyHovering = true;
                charts.monthly.update('none');
            });
            monthlyCanvas.addEventListener('mouseleave', () => {
                monthlyHovering = false;
                charts.monthly.update('none');
            });

            // ê¶Œë¦¬ê¸ˆ ë°” ì°¨íŠ¸
            const premiumCanvas = document.getElementById('chart-premium');
            let premiumHovering = false;
            
            charts.premium = new Chart(premiumCanvas, {
                type: 'bar',
                data: {
                    labels: data.premiumRanges.map(d => d.range),
                    datasets: [{
                        label: 'ë¹„ìœ¨',
                        data: data.premiumRanges.map(d => d.percentage),
                        backgroundColor: '#F59E0B'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            enabled: true,
                            displayColors: false,
                            padding: 10,
                            titleFont: { size: 13 },
                            bodyFont: { size: 13 },
                            callbacks: {
                                title: () => '',
                                label: (context) => `${context.label}: ${context.parsed.y.toFixed(1)}%`
                            }
                        },
                        datalabels: {
                            color: (context) => {
                                return context.dataset.data[context.dataIndex] <= 5 ? '#000' : '#fff';
                            },
                            font: {
                                weight: 'bold',
                                size: 11
                            },
                            anchor: (context) => {
                                return context.dataset.data[context.dataIndex] <= 5 ? 'end' : 'center';
                            },
                            align: (context) => {
                                return context.dataset.data[context.dataIndex] <= 5 ? 'top' : 'center';
                            },
                            formatter: (value) => {
                                if (premiumHovering) return '';
                                return value.toFixed(1) + '%';
                            }
                        }
                    },
                    scales: {
                        y: { 
                            beginAtZero: true,
                            max: 100,
                            title: { 
                                display: true, 
                                text: 'ë¹„ìœ¨ (%)',
                                font: { size: 11 }
                            },
                            ticks: { 
                                font: { size: 10 },
                                stepSize: 20
                            }
                        },
                        x: { 
                            ticks: { 
                                font: { size: 9 },
                                maxRotation: 45,
                                minRotation: 45
                            }
                        }
                    }
                }
            });
            
            premiumCanvas.addEventListener('mouseenter', () => {
                premiumHovering = true;
                charts.premium.update('none');
            });
            premiumCanvas.addEventListener('mouseleave', () => {
                premiumHovering = false;
                charts.premium.update('none');
            });

            // í‰ìˆ˜ëŒ€ë³„ ë„ë„› ì°¨íŠ¸
            const areaCanvas = document.getElementById('chart-area');
            let areaHovering = false;
            
            charts.area = new Chart(areaCanvas, {
                type: 'doughnut',
                data: {
                    labels: data.areaRanges.map(d => d.name),
                    datasets: [{
                        data: data.areaRanges.map(d => d.percentage),
                        backgroundColor: colors
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { 
                            position: 'bottom',
                            labels: { 
                                font: { size: 11 },
                                padding: 10
                            }
                        },
                        tooltip: {
                            enabled: true,
                            displayColors: false,
                            padding: 10,
                            titleFont: { size: 13 },
                            bodyFont: { size: 13 },
                            callbacks: {
                                title: () => '',
                                label: (context) => `${context.label}: ${context.parsed}%`
                            }
                        },
                        datalabels: {
                            color: '#fff',
                            font: {
                                weight: 'bold',
                                size: 11
                            },
                            formatter: (value, context) => {
                                if (areaHovering) return '';
                                const label = context.chart.data.labels[context.dataIndex];
                                return `${label}\n${value.toFixed(1)}%`;
                            }
                        }
                    }
                }
            });
            
            areaCanvas.addEventListener('mouseenter', () => {
                areaHovering = true;
                charts.area.update('none');
            });
            areaCanvas.addEventListener('mouseleave', () => {
                areaHovering = false;
                charts.area.update('none');
            });
        }

        function generateInsights(data, gu, type) {
            const topDong = data.topDongs[0];
            const topDeposit = data.depositRanges.reduce((max, item) => 
                item.percentage > max.percentage ? item : max
            );
            const topMonthly = data.monthlyRanges.reduce((max, item) => 
                item.percentage > max.percentage ? item : max
            );
            const topArea = data.areaRanges.reduce((max, item) => 
                item.percentage > max.percentage ? item : max
            );
            
            const typeText = type === 'ì „ì²´' ? 'ìƒê°€ì™€ ì‚¬ë¬´ì‹¤' : type;
            
            const insightHTML = `
                <div class="bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl p-4 sm:p-6 text-white shadow-2xl">
                    <div class="flex flex-col sm:flex-row items-start gap-3 sm:gap-5">
                        <div class="text-3xl sm:text-4xl flex-shrink-0">ğŸ¯</div>
                        <div class="flex-1 w-full">
                            <h3 class="text-lg sm:text-xl md:text-2xl font-bold mb-3">ë§¤ë¬¼ ë“±ë¡ ìš°ì„ ìˆœìœ„</h3>
                            <div class="space-y-2 sm:space-y-3 text-sm sm:text-base">
                                <p class="leading-relaxed">
                                    <strong>${gu} ${typeText}</strong> ë§¤ë¬¼ ë“±ë¡ ì‹œ ì•„ë˜ ì¡°ê±´ì„ ìµœìš°ì„ ìœ¼ë¡œ í™•ë³´í•˜ì„¸ìš”.
                                </p>
                                <div class="bg-white/10 rounded-xl p-3 sm:p-4 space-y-2">
                                    <div class="flex items-start gap-2">
                                        <span class="text-xl flex-shrink-0">ğŸ“</span>
                                        <span class="text-xs sm:text-sm"><strong>ì§€ì—­:</strong> ${topDong.name} (${topDong.percentage}% ë¬¸ì˜ìœ¨)</span>
                                    </div>
                                    <div class="flex items-start gap-2">
                                        <span class="text-xl flex-shrink-0">ğŸ“</span>
                                        <span class="text-xs sm:text-sm"><strong>í‰ìˆ˜:</strong> ${topArea.name} (${topArea.percentage.toFixed(1)}% ì„ í˜¸)</span>
                                    </div>
                                    <div class="flex items-start gap-2">
                                        <span class="text-xl flex-shrink-0">ğŸ’°</span>
                                        <span class="text-xs sm:text-sm"><strong>ë³´ì¦ê¸ˆ:</strong> ${topDeposit.range} (${topDeposit.percentage.toFixed(1)}% ë¬¸ì˜)</span>
                                    </div>
                                    <div class="flex items-start gap-2">
                                        <span class="text-xl flex-shrink-0">ğŸ </span>
                                        <span class="text-xs sm:text-sm"><strong>ì›”ì„¸:</strong> ${topMonthly.range} (${topMonthly.percentage.toFixed(1)}% ë¬¸ì˜)</span>
                                    </div>
                                </div>
                                <p class="text-white/90 mt-3 text-xs sm:text-sm leading-relaxed">
                                    ìœ„ ì¡°ê±´ì˜ ì¡°í•©ì´ ê°€ì¥ ë†’ì€ ìˆ˜ìš”ë¥¼ ë³´ì´ë©°, ë¹ ë¥¸ ì„±ì•½ì„ ê¸°ëŒ€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('insights-content').innerHTML = insightHTML;
        }

        window.addEventListener('DOMContentLoaded', loadData);
    </script>
</body>
</html>